2025-11-16 15:21:36,788 | No config file found in this directory.
2025-11-16 15:21:36,789 | OSError occurred while reading TOML file: [Errno 2] No such file or directory: '/mnt/data/aws-sam-baseline/samconfig.toml'
2025-11-16 15:21:36,789 | Config file location: /mnt/data/aws-sam-baseline/samconfig.toml
2025-11-16 15:21:36,789 | Config file '/mnt/data/aws-sam-baseline/samconfig.toml' does not exist
2025-11-16 15:21:36,813 | Using SAM Template at /mnt/data/aws-sam-baseline/template.yaml
2025-11-16 15:21:36,834 | OSError occurred while reading TOML file: [Errno 2] No such file or directory: '/mnt/data/aws-sam-baseline/samconfig.toml'
2025-11-16 15:21:36,835 | Using config file: samconfig.toml, config environment: default
2025-11-16 15:21:36,835 | Expand command line arguments to:
2025-11-16 15:21:36,835 | --template_file=/mnt/data/aws-sam-baseline/template.yaml --mount_with=READ --build_dir=.aws-sam/build --cache_dir=.aws-sam/cache 
2025-11-16 15:21:36,862 | 'build' command is called
2025-11-16 15:21:36,924 | Collected default values for parameters: {'ProjectName': 'myapp', 'EnvironmentName': 'dev'}
2025-11-16 15:21:36,951 | There is no customer defined id or cdk path defined for resource CommonDependenciesLayer, so we will use the resource logical id as the resource id
2025-11-16 15:21:36,951 | There is no customer defined id or cdk path defined for resource SharedUtilsLayer, so we will use the resource logical id as the resource id
2025-11-16 15:21:36,951 | There is no customer defined id or cdk path defined for resource MyAppLambdaRole, so we will use the resource logical id as the resource id
2025-11-16 15:21:36,951 | There is no customer defined id or cdk path defined for resource PingFunction, so we will use the resource logical id as the resource id
2025-11-16 15:21:36,951 | There is no customer defined id or cdk path defined for resource WelcomeEmailFunction, so we will use the resource logical id as the resource id
2025-11-16 15:21:36,951 | There is no customer defined id or cdk path defined for resource AuthFunction, so we will use the resource logical id as the resource id
2025-11-16 15:21:36,951 | There is no customer defined id or cdk path defined for resource MyAppUserPool, so we will use the resource logical id as the resource id
2025-11-16 15:21:36,951 | There is no customer defined id or cdk path defined for resource MyAppUserPoolClient, so we will use the resource logical id as the resource id
2025-11-16 15:21:36,951 | There is no customer defined id or cdk path defined for resource ServerlessRestApi, so we will use the resource logical id as the resource id
2025-11-16 15:21:36,954 | Unable to resolve property Value: {'Fn::GetAtt': ['MyAppUserPoolClient', 'ClientSecret']}. Leaving as is.
2025-11-16 15:21:36,954 | 0 stacks found in the template
2025-11-16 15:21:36,954 | Collected default values for parameters: {'ProjectName': 'myapp', 'EnvironmentName': 'dev'}
2025-11-16 15:21:36,976 | There is no customer defined id or cdk path defined for resource CommonDependenciesLayer, so we will use the resource logical id as the resource id
2025-11-16 15:21:36,976 | There is no customer defined id or cdk path defined for resource SharedUtilsLayer, so we will use the resource logical id as the resource id
2025-11-16 15:21:36,976 | There is no customer defined id or cdk path defined for resource MyAppLambdaRole, so we will use the resource logical id as the resource id
2025-11-16 15:21:36,976 | There is no customer defined id or cdk path defined for resource PingFunction, so we will use the resource logical id as the resource id
2025-11-16 15:21:36,976 | There is no customer defined id or cdk path defined for resource WelcomeEmailFunction, so we will use the resource logical id as the resource id
2025-11-16 15:21:36,976 | There is no customer defined id or cdk path defined for resource AuthFunction, so we will use the resource logical id as the resource id
2025-11-16 15:21:36,976 | There is no customer defined id or cdk path defined for resource MyAppUserPool, so we will use the resource logical id as the resource id
2025-11-16 15:21:36,976 | There is no customer defined id or cdk path defined for resource MyAppUserPoolClient, so we will use the resource logical id as the resource id
2025-11-16 15:21:36,976 | There is no customer defined id or cdk path defined for resource ServerlessRestApi, so we will use the resource logical id as the resource id
2025-11-16 15:21:36,978 | Unable to resolve property Value: {'Fn::GetAtt': ['MyAppUserPoolClient', 'ClientSecret']}. Leaving as is.
2025-11-16 15:21:36,978 | 9 resources found in the stack 
2025-11-16 15:21:36,978 | --base-dir is not presented, adjusting uri layers/common/ relative to /mnt/data/aws-sam-baseline/template.yaml
2025-11-16 15:21:36,978 | --base-dir is not presented, adjusting uri dist/shared/nodejs/ relative to /mnt/data/aws-sam-baseline/template.yaml
2025-11-16 15:21:36,978 | Found Serverless function with name='PingFunction' and CodeUri='src/functions/ping/'
2025-11-16 15:21:36,979 | --base-dir is not presented, adjusting uri src/functions/ping/ relative to /mnt/data/aws-sam-baseline/template.yaml
2025-11-16 15:21:36,979 | --base-dir is not presented, adjusting uri layers/common/ relative to /mnt/data/aws-sam-baseline/template.yaml
2025-11-16 15:21:36,979 | --base-dir is not presented, adjusting uri dist/shared/nodejs/ relative to /mnt/data/aws-sam-baseline/template.yaml
2025-11-16 15:21:36,979 | Found Serverless function with name='WelcomeEmailFunction' and CodeUri='src/functions/email/'
2025-11-16 15:21:36,979 | --base-dir is not presented, adjusting uri src/functions/email/ relative to /mnt/data/aws-sam-baseline/template.yaml
2025-11-16 15:21:36,979 | --base-dir is not presented, adjusting uri layers/common/ relative to /mnt/data/aws-sam-baseline/template.yaml
2025-11-16 15:21:36,979 | --base-dir is not presented, adjusting uri dist/shared/nodejs/ relative to /mnt/data/aws-sam-baseline/template.yaml
2025-11-16 15:21:36,979 | Found Serverless function with name='AuthFunction' and CodeUri='src/functions/auth/'
2025-11-16 15:21:36,979 | --base-dir is not presented, adjusting uri src/functions/auth/ relative to /mnt/data/aws-sam-baseline/template.yaml
2025-11-16 15:21:36,979 | --base-dir is not presented, adjusting uri layers/common/ relative to /mnt/data/aws-sam-baseline/template.yaml
2025-11-16 15:21:36,979 | --base-dir is not presented, adjusting uri dist/shared/nodejs/ relative to /mnt/data/aws-sam-baseline/template.yaml
2025-11-16 15:21:37,003 | 9 resources found in the stack 
2025-11-16 15:21:37,003 | Found Serverless function with name='PingFunction' and CodeUri='src/functions/ping/'
2025-11-16 15:21:37,003 | Found Serverless function with name='WelcomeEmailFunction' and CodeUri='src/functions/email/'
2025-11-16 15:21:37,003 | Found Serverless function with name='AuthFunction' and CodeUri='src/functions/auth/'
2025-11-16 15:21:37,004 | --base-dir is not presented, adjusting uri layers/common/ relative to /mnt/data/aws-sam-baseline/template.yaml
2025-11-16 15:21:37,004 | --base-dir is not presented, adjusting uri dist/shared/nodejs/ relative to /mnt/data/aws-sam-baseline/template.yaml
2025-11-16 15:21:37,005 | Found Serverless function with name='PingFunction' and CodeUri='src/functions/ping/'
2025-11-16 15:21:37,005 | --base-dir is not presented, adjusting uri src/functions/ping/ relative to /mnt/data/aws-sam-baseline/template.yaml
2025-11-16 15:21:37,005 | --base-dir is not presented, adjusting uri layers/common/ relative to /mnt/data/aws-sam-baseline/template.yaml
2025-11-16 15:21:37,005 | --base-dir is not presented, adjusting uri dist/shared/nodejs/ relative to /mnt/data/aws-sam-baseline/template.yaml
2025-11-16 15:21:37,005 | Found Serverless function with name='WelcomeEmailFunction' and CodeUri='src/functions/email/'
2025-11-16 15:21:37,005 | --base-dir is not presented, adjusting uri src/functions/email/ relative to /mnt/data/aws-sam-baseline/template.yaml
2025-11-16 15:21:37,005 | --base-dir is not presented, adjusting uri layers/common/ relative to /mnt/data/aws-sam-baseline/template.yaml
2025-11-16 15:21:37,005 | --base-dir is not presented, adjusting uri dist/shared/nodejs/ relative to /mnt/data/aws-sam-baseline/template.yaml
2025-11-16 15:21:37,005 | Found Serverless function with name='AuthFunction' and CodeUri='src/functions/auth/'
2025-11-16 15:21:37,005 | --base-dir is not presented, adjusting uri src/functions/auth/ relative to /mnt/data/aws-sam-baseline/template.yaml
2025-11-16 15:21:37,006 | Instantiating build definitions
2025-11-16 15:21:37,021 | Same function build definition found, adding function (Previous: BuildDefinition(nodejs20.x, /mnt/data/aws-sam-baseline/src/functions/ping, Zip, , 4a570240-205c-42e8-b159-4cb5869390d3, {'BuildMethod': 'esbuild', 'BuildProperties': {'Minify': True, 'Target': 'es2020', 'Sourcemap': True, 'EntryPoints': ['index.ts'], 'External': ['shared']}}, {}, x86_64, []), Current: BuildDefinition(nodejs20.x, /mnt/data/aws-sam-baseline/src/functions/ping, Zip, , 4d79639a-4b4e-435e-a4cc-08745aee8b4f, {'BuildMethod': 'esbuild', 'BuildProperties': {'Minify': True, 'Target': 'es2020', 'Sourcemap': True, 'EntryPoints': ['index.ts'], 'External': ['shared']}}, {}, x86_64, []), Function: Function({'function_id': 'PingFunction', 'name': 'PingFunction', 'functionname': 'myapp-ping-dev', 'runtime': 'nodejs20.x', 'memory': None, 'timeout': 30, 'handler': 'index.handler', 'imageuri': None, 'packagetype': 'Zip', 'imageconfig': None, 'codeuri': '/mnt/data/aws-sam-baseline/src/functions/ping', 'environment': {'Variables': {'ENV': 'dev', 'NODE_OPTIONS': '--enable-source-maps', 'LOG_LEVEL': 'INFO', 'MONGODB_SECRET_ID': 'myapp/dev/mongodb', 'COGNITO_CLIENT_ID_PATH': '/myapp/dev/auth/clientId', 'COGNITO_CLIENT_SECRET_PATH': '/myapp/dev/auth/clientSecret', 'COGNITO_USER_POOL_ID': 'MyAppUserPool'}}, 'rolearn': 'arn:aws:lambda:us-east-1:123456789012:function:MyAppLambdaRole', 'layers': [<samcli.lib.providers.provider.LayerVersion object at 0x7f54c4b7bfd0>, <samcli.lib.providers.provider.LayerVersion object at 0x7f54c4b97810>], 'events': {'PingApi': {'Type': 'Api', 'Properties': {'Path': '/ping', 'Method': 'get', 'RestApiId': 'ServerlessRestApi'}}}, 'metadata': {'BuildMethod': 'esbuild', 'BuildProperties': {'Minify': True, 'Target': 'es2020', 'Sourcemap': True, 'EntryPoints': ['index.ts'], 'External': ['shared']}, 'SamResourceId': 'PingFunction'}, 'inlinecode': None, 'codesign_config_arn': None, 'architectures': ['x86_64'], 'function_url_config': None, 'function_build_info': <FunctionBuildInfo.BuildableZip: ('BuildableZip', 'Regular ZIP function which can be build with SAM CLI')>, 'stack_path': '', 'runtime_management_config': None, 'logging_config': None}))
2025-11-16 15:21:37,021 | Same function build definition found, adding function (Previous: BuildDefinition(nodejs20.x, /mnt/data/aws-sam-baseline/src/functions/email, Zip, , 168fb332-1fae-46c5-80f8-8ae8a896dca9, {'BuildMethod': 'esbuild', 'BuildProperties': {'Minify': False, 'Target': 'es2020', 'Sourcemap': True, 'EntryPoints': ['index.ts'], 'External': ['shared']}}, {}, x86_64, []), Current: BuildDefinition(nodejs20.x, /mnt/data/aws-sam-baseline/src/functions/email, Zip, , 77d8dc32-dfb9-4c9c-807b-665ba4de2224, {'BuildMethod': 'esbuild', 'BuildProperties': {'Minify': False, 'Target': 'es2020', 'Sourcemap': True, 'EntryPoints': ['index.ts'], 'External': ['shared']}}, {}, x86_64, []), Function: Function({'function_id': 'WelcomeEmailFunction', 'name': 'WelcomeEmailFunction', 'functionname': 'myapp-welcome-email-dev', 'runtime': 'nodejs20.x', 'memory': None, 'timeout': 30, 'handler': 'index.handler', 'imageuri': None, 'packagetype': 'Zip', 'imageconfig': None, 'codeuri': '/mnt/data/aws-sam-baseline/src/functions/email', 'environment': {'Variables': {'ENV': 'dev', 'NODE_OPTIONS': '--enable-source-maps', 'LOG_LEVEL': 'INFO', 'FROM_EMAIL': 'noreply@dev.fitnearn.com'}}, 'rolearn': 'arn:aws:lambda:us-east-1:123456789012:function:MyAppLambdaRole', 'layers': [<samcli.lib.providers.provider.LayerVersion object at 0x7f54c4b95ed0>, <samcli.lib.providers.provider.LayerVersion object at 0x7f54c4b955d0>], 'events': {'WelcomeEmailApi': {'Type': 'Api', 'Properties': {'Path': '/welcome-email', 'Method': 'POST', 'RestApiId': 'ServerlessRestApi'}}}, 'metadata': {'BuildMethod': 'esbuild', 'BuildProperties': {'Minify': False, 'Target': 'es2020', 'Sourcemap': True, 'EntryPoints': ['index.ts'], 'External': ['shared']}, 'SamResourceId': 'WelcomeEmailFunction'}, 'inlinecode': None, 'codesign_config_arn': None, 'architectures': ['x86_64'], 'function_url_config': None, 'function_build_info': <FunctionBuildInfo.BuildableZip: ('BuildableZip', 'Regular ZIP function which can be build with SAM CLI')>, 'stack_path': '', 'runtime_management_config': None, 'logging_config': None}))
2025-11-16 15:21:37,021 | Same function build definition found, adding function (Previous: BuildDefinition(nodejs20.x, /mnt/data/aws-sam-baseline/src/functions/auth, Zip, , 0eb92095-7c54-48ae-a034-62e3f3ce74d6, {'BuildMethod': 'esbuild', 'BuildProperties': {'Minify': False, 'Target': 'es2020', 'Sourcemap': True, 'EntryPoints': ['index.ts'], 'External': ['shared']}}, {}, x86_64, []), Current: BuildDefinition(nodejs20.x, /mnt/data/aws-sam-baseline/src/functions/auth, Zip, , c7a554e7-56fb-4536-8a61-a69c5ceac36d, {'BuildMethod': 'esbuild', 'BuildProperties': {'Minify': False, 'Target': 'es2020', 'Sourcemap': True, 'EntryPoints': ['index.ts'], 'External': ['shared']}}, {}, x86_64, []), Function: Function({'function_id': 'AuthFunction', 'name': 'AuthFunction', 'functionname': 'myapp-auth-dev', 'runtime': 'nodejs20.x', 'memory': None, 'timeout': 30, 'handler': 'index.handler', 'imageuri': None, 'packagetype': 'Zip', 'imageconfig': None, 'codeuri': '/mnt/data/aws-sam-baseline/src/functions/auth', 'environment': {'Variables': {'ENV': 'dev', 'NODE_OPTIONS': '--enable-source-maps', 'LOG_LEVEL': 'INFO', 'MONGODB_SECRET_ID': 'myapp/dev/mongodb', 'COGNITO_CLIENT_ID_PATH': '/myapp/dev/auth/clientId', 'COGNITO_CLIENT_SECRET_PATH': '/myapp/dev/auth/clientSecret', 'COGNITO_USER_POOL_ID': 'MyAppUserPool', 'FROM_EMAIL': 'noreply@dev.fitnearn.com'}}, 'rolearn': 'arn:aws:lambda:us-east-1:123456789012:function:MyAppLambdaRole', 'layers': [<samcli.lib.providers.provider.LayerVersion object at 0x7f54c4b95510>, <samcli.lib.providers.provider.LayerVersion object at 0x7f54c4b97d10>], 'events': {'RegisterApi': {'Type': 'Api', 'Properties': {'Path': '/register', 'Method': 'POST', 'RestApiId': 'ServerlessRestApi'}}}, 'metadata': {'BuildMethod': 'esbuild', 'BuildProperties': {'Minify': False, 'Target': 'es2020', 'Sourcemap': True, 'EntryPoints': ['index.ts'], 'External': ['shared']}, 'SamResourceId': 'AuthFunction'}, 'inlinecode': None, 'codesign_config_arn': None, 'architectures': ['x86_64'], 'function_url_config': None, 'function_build_info': <FunctionBuildInfo.BuildableZip: ('BuildableZip', 'Regular ZIP function which can be build with SAM CLI')>, 'stack_path': '', 'runtime_management_config': None, 'logging_config': None}))
2025-11-16 15:21:37,022 | Same Layer build definition found, adding layer (Previous: LayerBuildDefinition(CommonDependenciesLayer, /mnt/data/aws-sam-baseline/layers/common, , da049632-23d0-452b-b19c-62a93709ddbb, makefile, ['nodejs20.x'], x86_64, {}), Current: LayerBuildDefinition(CommonDependenciesLayer, /mnt/data/aws-sam-baseline/layers/common, , b789ddb0-5a7c-4010-a303-3a33f2dce9f4, makefile, ['nodejs20.x'], x86_64, {}), Layer: <samcli.lib.providers.provider.LayerVersion object at 0x7f54c4df5990>)
2025-11-16 15:21:37,022 | Same Layer build definition found, adding layer (Previous: LayerBuildDefinition(SharedUtilsLayer, /mnt/data/aws-sam-baseline/dist/shared/nodejs, , 2189b610-a66c-4d40-bc5c-5bda651031f6, nodejs20.x, ['nodejs20.x'], x86_64, {}), Current: LayerBuildDefinition(SharedUtilsLayer, /mnt/data/aws-sam-baseline/dist/shared/nodejs, , 81b8b07e-cab1-4ce8-9d44-a4cad48fac44, nodejs20.x, ['nodejs20.x'], x86_64, {}), Layer: <samcli.lib.providers.provider.LayerVersion object at 0x7f54c4df5ed0>)
2025-11-16 15:21:37,026 | Building layer 'CommonDependenciesLayer'
2025-11-16 15:21:37,027 | Loading workflow module 'aws_lambda_builders.workflows'
2025-11-16 15:21:37,028 | Registering workflow 'CustomMakeBuilder' with capability 'Capability(language='provided', dependency_manager=None, application_framework=None)'
2025-11-16 15:21:37,029 | Registering workflow 'DotnetCliPackageBuilder' with capability 'Capability(language='dotnet', dependency_manager='cli-package', application_framework=None)'
2025-11-16 15:21:37,031 | Registering workflow 'GoModulesBuilder' with capability 'Capability(language='go', dependency_manager='modules', application_framework=None)'
2025-11-16 15:21:37,032 | Registering workflow 'JavaGradleWorkflow' with capability 'Capability(language='java', dependency_manager='gradle', application_framework=None)'
2025-11-16 15:21:37,033 | Registering workflow 'JavaMavenWorkflow' with capability 'Capability(language='java', dependency_manager='maven', application_framework=None)'
2025-11-16 15:21:37,035 | Registering workflow 'NodejsNpmBuilder' with capability 'Capability(language='nodejs', dependency_manager='npm', application_framework=None)'
2025-11-16 15:21:37,036 | Registering workflow 'NodejsNpmEsbuildBuilder' with capability 'Capability(language='nodejs', dependency_manager='npm-esbuild', application_framework=None)'
2025-11-16 15:21:37,039 | Registering workflow 'PythonPipBuilder' with capability 'Capability(language='python', dependency_manager='pip', application_framework=None)'
2025-11-16 15:21:37,040 | Registering workflow 'RubyBundlerBuilder' with capability 'Capability(language='ruby', dependency_manager='bundler', application_framework=None)'
2025-11-16 15:21:37,041 | Registering workflow 'RustCargoLambdaBuilder' with capability 'Capability(language='rust', dependency_manager='cargo', application_framework=None)'
2025-11-16 15:21:37,041 | Found workflow 'CustomMakeBuilder' to support capabilities 'Capability(language='provided', dependency_manager=None, application_framework=None)'
2025-11-16 15:21:37,041 | Running workflow 'CustomMakeBuilder'
2025-11-16 15:21:37,041 | CommonDependenciesLayer: Running CustomMakeBuilder:CopySource
2025-11-16 15:21:37,042 | Copying source file (/mnt/data/aws-sam-baseline/layers/common/Makefile) to destination (/tmp/tmpzu996gj_/Makefile)
2025-11-16 15:21:37,042 | Copying source file (/mnt/data/aws-sam-baseline/layers/common/package.json) to destination (/tmp/tmpzu996gj_/package.json)
2025-11-16 15:21:37,042 | CustomMakeBuilder:CopySource succeeded
2025-11-16 15:21:37,042 | CommonDependenciesLayer: Running CustomMakeBuilder:MakeBuild
2025-11-16 15:21:37,042 | CommonDependenciesLayer: Current Artifacts Directory : /mnt/data/aws-sam-baseline/.aws-sam/build/CommonDependenciesLayer
2025-11-16 15:21:37,042 | executing Make: ['make', '--makefile', '/mnt/data/aws-sam-baseline/layers/common/Makefile', 'build-CommonDependenciesLayer']
mkdir -p "/mnt/data/aws-sam-baseline/.aws-sam/build/CommonDependenciesLayer/nodejs"
cp package.json "/mnt/data/aws-sam-baseline/.aws-sam/build/CommonDependenciesLayer/nodejs/"
cd "/mnt/data/aws-sam-baseline/.aws-sam/build/CommonDependenciesLayer/nodejs" && npm install --omit=dev
